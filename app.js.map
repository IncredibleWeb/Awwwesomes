{"version":3,"sources":["webpack:///webpack/bootstrap b4f3f408e7cb19378e69","webpack:///external \"path\"","webpack:///./api/mock.service.js","webpack:///external \"lodash/core\"","webpack:///./app.babel.js","webpack:///external \"http\"","webpack:///external \"express\"","webpack:///external \"express-handlebars\"","webpack:///./server/models/path-config.js","webpack:///external \"fs\"","webpack:///./api/mock.request.js","webpack:///external \"xmlhttprequest\"","webpack:///./api/pages.json","webpack:///./api/mock.adapter.js","webpack:///./helpers/image.js","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"express-session\"","webpack:///./helpers/handlebars.js","webpack:///external \"handlebars\""],"names":["Service","adapter","pageData","toPages","url","Promise","resolve","reject","requestBuilder","request","getRequest","open","onload","status","JSON","parse","responseText","Error","statusText","onerror","send","urlPath","level","get","then","response","find","item","parseInt","catch","error","console","log","app","use","json","urlencoded","extended","viewsDir","hbs","create","defaultLayout","layoutsDir","join","__dirname","partialsDir","extname","set","engine","registerHandlebarsHelpers","static","maxAge","secret","cookie","unset","resave","saveUninitialized","sameSite","service","pathConfig","post","req","res","body","session","answer","isValid","redirect","urlSections","path","split","filter","sectionString","length","getConfig","pathConfigData","getData","query","apiData","data","view","answers","value","isSelected","isCorrect","allowNextLevel","render","port","process","env","createServer","listen","module","exports","folder","pathConfigs","defaultPathConfig","inlineStyles","getFileContents","remoteStyles","remoteScripts","files","self","flattenedContents","forEach","file","readFileSync","object","getPageData","Object","assign","Request","isServer","isOnServer","XMLHttpRequest","window","document","Adapter","title","html","meta","images","toResponsiveImage","pages","key","toPage","Image","defaultImage","responsiveImageData","src","alt","srcset","width","i","HandlebarsHelpers","registerHelper","lvalue","operator","rvalue","options","parseFloat"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b4f3f408e7cb19378e69","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 0","import _ from 'lodash/core';\nimport Request from './mock.request';\nimport pageData from './pages.json';\nimport Adapter from './mock.adapter';\n\nexport default class Service {\n    constructor() {\n        this.adapter = new Adapter();\n        this.pageData = this.adapter.toPages(pageData);\n    }\n\n    get(url) {\n        return new Promise(function(resolve, reject) {\n            // Using Request abstracts away dealing with XMLHttpRequest\n            let requestBuilder = new Request();\n            let request = requestBuilder.getRequest();\n\n            request.open('GET', url);\n            request.onload = function() {\n                // success\n                if (request.status === 200) {\n                    // resolve the promise\n                    resolve(JSON.parse(request.responseText));\n                } else {\n                    // error retrieving file\n                    reject(Error(request.statusText));\n                }\n            };\n\n            request.onerror = function() {\n                // network errors\n                reject(Error('Network Error'));\n            };\n\n            request.send();\n        });\n    }\n\n    getPageData(urlPath) {\n        return Promise.resolve(this.pageData[urlPath]);\n    }\n\n    getData(level) {\n        level = level || 1;\n        return this.get('http://localhost:3000/api/data.json').then((response) => {\n            return _.find(response, (item) => {\n                return item.level === parseInt(level);\n            });\n        }).catch((error) => {\n            console.log('Unable to retrieve API data:', error);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./api/mock.service.js","module.exports = require(\"lodash/core\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/core\"\n// module id = 2\n// module chunks = 0","/* global  __dirname */\n/* global  process */\n\n'use strict';\n\nimport http from 'http';\nimport path from 'path';\nimport express from 'express';\nimport exphbs from 'express-handlebars';\nimport PathConfig from './server/models/path-config';\nimport bodyParser from 'body-parser';\nimport compression from 'compression';\nimport session from 'express-session';\nimport _ from 'lodash/core';\nimport Service from './api/mock.service';\nimport HandlebarsHelpers from './helpers/handlebars';\n\nlet app = express();\n\n// enable g-zip compression\napp.use(compression());\n\n// Setup body parser middleware for parsing POST request bodies\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\nlet viewsDir = './src/templates';\n\n// setup express to use handlebars as the templating engine\nlet hbs = exphbs.create({\n    defaultLayout: 'main',\n    layoutsDir: path.join(__dirname, `${viewsDir}/layouts`),\n    partialsDir: path.join(__dirname, `${viewsDir}/partials`),\n    extname: '.hbs'\n});\napp.set('views', path.join(__dirname, `${viewsDir}`));\napp.engine('hbs', hbs.engine);\napp.set('view engine', 'hbs');\n\n// register handlebar helpers\nHandlebarsHelpers.registerHandlebarsHelpers();\n\n// setup server for static assets\napp.use('/', express.static(`${process.env.outputFolder}`, { maxAge: 604800000 }));\n\n// setup session middleware\napp.use(session({\n    secret: 'test',\n    cookie: { maxAge: 1200000 },\n    unset: 'destroy',\n    resave: true,\n    saveUninitialized: false,\n    sameSite: true\n}));\n\nlet service = new Service();\n\nlet pathConfig = new PathConfig(`/../../${process.env.outputFolder}`);\n\n// setup server urls\napp.post('/learn', (req, res) => {\n    if (req.body) {\n        // store the user's selection in the session\n        req.session.answer = req.body.answer;\n        // notify the request that it was successful\n        req.session.isValid = req.body.answer === 'name; first name';\n    }\n\n    res.redirect('/learn' + '?level=' + (req.body.level || 1));\n});\n\n// setup server urls\napp.get('/*', (req, res) => {\n    // extract the path from the url\n    let urlSections = req.path.split('/');\n    urlSections = urlSections.filter((sectionString) => {\n        return sectionString.length > 0;\n    });\n\n    let urlPath = null;\n    if (urlSections.length === 0) {\n        if (urlSections[0] === '') {}\n        urlPath = '/';\n    } else {\n        urlPath = '/' + urlSections.join('/');\n    }\n\n    // retrieve the path data\n    pathConfig.getConfig(urlPath).then((pathConfigData) => {\n        if (!pathConfigData) {\n            res.status(404).send();\n            return;\n        }\n\n        // retrieve API data if we are on the '/learn' page\n        if (urlPath === '/learn') {\n            service.getData(req.query.level).then((apiData) => {\n                // no data retrieved because user has completed the course\n                if (!apiData) {\n                    pathConfigData.data.view = 'finish';\n                } else {\n                    pathConfigData.data.view = 'learn';\n                }\n\n                pathConfigData.data.apiData = apiData;\n\n                // read data from the session\n                if (req.session.answer) {\n                    // update the user's selected answer\n                    let answer = _.find(pathConfigData.data.apiData.answers, (item) => {\n                        return item.value === req.session.answer;\n                    });\n\n                    answer.isSelected = true;\n                    if (answer.isCorrect) {\n                        // allow access to the next level\n                        pathConfigData.allowNextLevel = true;\n                    }\n\n                    // clear the session\n                    delete req.session.answer;\n                    delete req.session.isValid;\n                }\n\n                // render the response\n                res.render(pathConfigData.data.view, pathConfigData);\n            });\n        } else {\n            // render the response\n            res.render(pathConfigData.data.view, pathConfigData);\n        }\n    });\n});\n\nlet port = process.env.port || 3000;\nhttp.createServer(app).listen(port, () => {\n    return console.log(`Running Example on localhost:${port}`);\n});\n\nmodule.exports = app;\n\n\n\n// WEBPACK FOOTER //\n// ./app.babel.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"express-handlebars\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-handlebars\"\n// module id = 7\n// module chunks = 0","/* global  __dirname */\n\nimport fs from 'fs';\nimport path from 'path';\nimport Service from '../../api/mock.service';\n\nexport default class {\n    constructor(folder, pathConfigs) {\n        this.folder = folder;\n        this.defaultPathConfig = {\n            inlineStyles: this.getFileContents(['/inline.css']),\n            remoteStyles: ['/style.css'],\n            remoteScripts: ['/main.js']\n        };\n        this.service = new Service();\n    }\n\n    getFileContents(files) {\n        let self = this;\n        // concat inline styles for document <head>\n        let flattenedContents = '';\n        files.forEach(function(file) {\n            flattenedContents += fs.readFileSync(path.resolve(__dirname) + self.folder + file);\n        });\n\n        return flattenedContents;\n    }\n\n    getConfig(urlPath) {\n        let object = this.defaultPathConfig;\n\n        // concatenate with data from the API\n        return this.service.getPageData(urlPath).then((pageData) => {\n            object = Object.assign(object, pageData);\n\n            // check if the path is actually valid.\n            if (!object) {\n                return null;\n            }\n\n            return {\n                'data': object\n            };\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/path-config.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 9\n// module chunks = 0","import { XMLHttpRequest as ServerXMLHttpRequest } from 'xmlhttprequest';\n\n/*\n    This class is required to adapt the service to either the server or the client\n    since XMLHttpRequest is not available on the server side, but a wrapper for it\n    is available via NPM.\n    https://stackoverflow.com/questions/42460102/xmlhttprequest-not-defined-when-using-jsonloader-in-node\n*/\n\nexport default class Request {\n    getRequest() {\n        let isServer = this.isOnServer();\n\n        let request = null;\n        // If we're on the server, then use the imported version\n        if (isServer) {\n            request = new ServerXMLHttpRequest();\n        } else {\n            request = new XMLHttpRequest();\n        }\n        return request;\n    }\n    // Check if we are on the server or on the client\n    // Reference:\n    // https://stackoverflow.com/questions/4224606/how-to-check-whether-a-script-is-running-under-node-js\n    isOnServer() {\n        return !(typeof window !== 'undefined' && window.document);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./api/mock.request.js","module.exports = require(\"xmlhttprequest\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xmlhttprequest\"\n// module id = 11\n// module chunks = 0","module.exports = {\"/\":{\"view\":\"index\",\"meta\":{\"title\":\"Awwwesomes Summer Meetup 2017\"},\"title\":\"Awwwesomes\",\"images\":[{\"src\":\"/img/banner.jpg\",\"alt\":\"Poznan Old Market\",\"width\":720},{\"src\":\"/img/banner@2x.jpg\",\"alt\":\"Poznan Old Market\",\"width\":1440}],\"html\":\"<h1>Let's Learn!</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Harum, quis hic iure est ex, provi consectetur praesentium, atque.</p>\"},\"/learn\":{\"view\":\"learn\",\"meta\":{\"title\":\"Learn Polish\"},\"title\":\"Learn Polish\"},\"/settings\":{\"view\":\"settings\",\"meta\":{\"title\":\"Settings\"},\"title\":\"Settings\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./api/pages.json\n// module id = 12\n// module chunks = 0","import Image from '../helpers/image';\n\nexport default class Adapter {\n    toPage(data) {\n        if (data) {\n            return {\n                title: data.title,\n                html: data.html,\n                meta: {\n                    title: data.meta.title\n                },\n                images: Image.toResponsiveImage(data.images),\n                view: data.view\n            };\n        }\n    }\n\n    toPages(data) {\n        let pages = {};\n        if (data) {\n            for (let key in data) {\n                pages[key] = this.toPage(data[key]);\n            }\n        }\n        return pages;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./api/mock.adapter.js","export default class Image {\n    static toResponsiveImage(images) {\n        if (images && images.length > 0) {\n            let defaultImage = images[0];\n            let responsiveImageData = {\n                src: defaultImage.src,\n                alt: defaultImage.alt,\n                srcset: defaultImage.src + ' ' + defaultImage.width + 'w'\n            };\n            // If there any images left over, append their contents to the srcset\n            for (let i = 1; i < images.length; i++) {\n                responsiveImageData.srcset = `${responsiveImageData.srcset}, ${images[i].src} ${images[i].width}w`;\n            }\n            return responsiveImageData;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/image.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"compression\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"compression\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 17\n// module chunks = 0","import handlebars from 'handlebars';\n\nexport default class HandlebarsHelpers {\n    static registerHandlebarsHelpers() {\n        handlebars.registerHelper('math', function(lvalue, operator, rvalue, options) {\n            lvalue = parseFloat(lvalue);\n            rvalue = parseFloat(rvalue);\n\n            return {\n                '+': lvalue + rvalue,\n                '-': lvalue - rvalue,\n                '*': lvalue * rvalue,\n                '/': lvalue / rvalue,\n                '%': lvalue % rvalue\n            }[operator];\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./helpers/handlebars.js","module.exports = require(\"handlebars\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"handlebars\"\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}